# 无视减速的思路和方法

玩家的X移动速度和Y移动速度是由一个结构表示

``` cpp

// playerinfo+0x304 玩家横轴速度结构
// playerinfo+0x330 玩家竖轴速度结构
typedef struct Speed {
   // 总是0的一个值
   int unknown_always_zero;
   // 速度
   int speed;
   int unknown_always_zero2;
   // 紧跟的几个字段不知道干嘛的，但是如果要更改速度，需要同步更新这几个字段。
   // 如果只改速度，不改这几个字段，玩家会动不了。
   int unknown_1;
   int unknown_2;
   int unknown_3;
   int unknown_4;
};

```

更新速度的方法：

调用游戏call 0x4AAB70

更新速度的原型：

``` int __thiscall updateSpeed(Speed* speed, int value)``` ,其中第一个参数是Speed指针,第二个参数是速度值，调用该方法可以自动更新Speed结构中相关的速度字段。

## 基于上述办法实现无视减速的效果

可免疫所有类型的减速：YY的万物缠绕，XS的涛声云灭，冰魄盾，缓兵之计，夏侯眼睛，狂野禁锢等。

``` cpp

while(1)
{
   int (__thiscall* updateSpeed)(void* speed, int value) = 0x4AAB70;
   
   updateSpeed(GetCharactorOf(0x304/4), ???);
   updateSpeed(GetCharactorOf(0x330/4), ???);
}

```

问题是如何设置速度值？暂时在内存没找到玩家原始速度值的参数。通过逆向可得，玩家的速度是由一系列算法得出的，比如基础速度130+鞋子+翅膀+首饰+状态（XS、元神、结拜等） 
得出玩家的最终速度，但是找到的获取速度的call是还包含了减速相关的值。

在玩家的前几个字段标志位里，存在一个标志位为5534，表示玩家当前所处的动作是受万物攻击，但是此标志位不会随着万物状态消失而改变，应该需要联合某个状态来判断这个标志位是否生效。

如果你有什么思路和方法解决上述无视减速的问题，欢迎提交PR。
